<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Valentine Proposal ðŸ’˜</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#ff2d95;
      --bg2:#ff004c;
      --bg3:#7d2cff;
      --bg4:#ff5bbd;
      --white:#fff;
      --shadow: 0 12px 30px rgba(0,0,0,.25);
    }

    *{ box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
    
    html,body{ 
      height: 100%; 
      margin: 0; 
      padding: 0; 
      font-family: Poppins, system-ui; 
      overflow: hidden; 
      position: fixed; 
      width: 100%;
    }

    body{
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(255,255,255,.20), transparent 60%),
        radial-gradient(800px 500px at 80% 30%, rgba(255,255,255,.10), transparent 60%),
        linear-gradient(135deg, var(--bg1), var(--bg2), var(--bg3), var(--bg4));
      background-size: 300% 300%;
      animation: bgShift 10s ease-in-out infinite;
      touch-action: none;
    }

    @keyframes bgShift{
      0%{ background-position: 0% 50%; }
      50%{ background-position: 100% 50%; }
      100%{ background-position: 0% 50%; }
    }

    /* =========================
       LYRICS STYLES
    ========================== */
    .lyrics-overlay {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: 5; /* Behind card (11) but above bg */
      pointer-events: none;
      display: flex;
      justify-content: center;
      overflow: hidden;
      /* Gradient mask to fade text at top/bottom */
      mask-image: linear-gradient(to bottom, transparent 0%, black 20%, black 80%, transparent 100%);
      -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 20%, black 80%, transparent 100%);
    }

    .scrolling-text {
      text-align: center;
      color: rgba(255, 255, 255, 0.25); /* Subtle opacity */
      font-family: 'Great Vibes', cursive;
      font-size: clamp(24px, 5vw, 36px);
      line-height: 1.8;
      width: 90%;
      max-width: 600px;
      /* Animation speed: Adjusted for shorter lyrics */
      animation: scrollLyrics 30s linear infinite;
      padding-bottom: 50vh; 
    }

    @keyframes scrollLyrics {
      0% { transform: translateY(100vh); }
      100% { transform: translateY(-100%); }
    }

    /* Bokeh & Glitter */
    .bokeh, .glitter {
      position: absolute; inset: 0; pointer-events: none; will-change: transform;
    }
    .bokeh{
      z-index: 2;
      background:
        radial-gradient(circle at 20% 30%, rgba(255,255,255,.22), transparent 12%),
        radial-gradient(circle at 60% 20%, rgba(255,255,255,.18), transparent 14%),
        radial-gradient(circle at 80% 60%, rgba(255,255,255,.12), transparent 16%);
      filter: blur(3px);
      opacity: .65;
      animation: bokehFloat 8s ease-in-out infinite alternate;
      mix-blend-mode: screen;
    }
    @keyframes bokehFloat{
      from{ transform: translate3d(0,0,0); }
      to{ transform: translate3d(0,-15px,0); }
    }

    .glitter{
      z-index: 2;
      background-image: radial-gradient(rgba(255,255,255,.5) 1px, transparent 1px);
      background-size: 60px 60px;
      opacity: .15;
      animation: glitterMove 10s linear infinite;
    }
    @keyframes glitterMove{
      from{ transform: translate3d(0,0,0); }
      to{ transform: translate3d(-60px, -60px, 0); }
    }

    /* Main Container */
    .wrap{
      position: relative;
      height: 100dvh;
      width: 100vw;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: env(safe-area-inset-top) 20px env(safe-area-inset-bottom) 20px;
      z-index: 10;
    }

    .card{
      width: 100%;
      max-width: 420px;
      padding: 30px 20px;
      border-radius: 28px;
      background: rgba(255, 255, 255, 0.15); 
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: var(--shadow);
      text-align: center;
      position: relative;
      z-index: 11;
      user-select: none;
    }

    .question{
      font-weight: 900;
      font-size: clamp(24px, 6vw, 40px);
      line-height: 1.1;
      text-transform: uppercase;
      color: var(--white);
      text-shadow: 0 0 20px rgba(255,0,120,0.5);
    }

    .romanticFont{
      display: block;
      font-family: "Great Vibes", cursive;
      font-weight: 400;
      font-size: clamp(38px, 10vw, 55px);
      text-transform: none;
      margin-bottom: 5px;
    }

    .btnRow{
      margin-top: 25px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      align-items: center;
    }

    button{
      border: none;
      cursor: pointer;
      font-weight: 800;
      font-size: 18px;
      padding: 16px 30px;
      border-radius: 50px;
      width: 200px;
      transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .yes{
      background: linear-gradient(135deg, #ff2b8c, #ff004c);
      color: white;
      box-shadow: 0 10px 25px rgba(255,0,120,0.4);
      z-index: 12;
    }

    .no{
      background: rgba(255, 255, 255, 0.2);
      color: white;
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      position: fixed;
      z-index: 100;
      transition: all 0.2s ease-out;
      width: 120px;
      padding: 12px;
    }

    .success{
      display: none;
      font-size: clamp(28px, 8vw, 45px);
      font-weight: 900;
      color: white;
      text-shadow: 0 0 20px rgba(255,255,255,0.5);
      animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    }

    @keyframes popIn{
      from{ transform: scale(0.5); opacity: 0; }
      to{ transform: scale(1); opacity: 1; }
    }

    .sub{
      margin-top: 15px;
      font-size: 13px;
      color: rgba(255,255,255,0.7);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .heart, .rainHeart, .confetti, .doodle {
      position: absolute;
      pointer-events: none;
      will-change: transform;
    }

    .gif {
      position: fixed;
      width: 140px;
      border-radius: 15px;
      z-index: 100;
      pointer-events: none;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }

    canvas#fx {
      position: fixed; inset: 0; pointer-events: none; z-index: 1;
    }

    .hidden { display: none !important; }
  </style>
</head>
<body>
  <audio id="music" loop>
    <source src="song.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <canvas id="fx"></canvas>
  <div class="bokeh"></div>
  <div class="glitter"></div>

  <div class="lyrics-overlay">
    <div class="scrolling-text" id="lyricsContent">
      </div>
  </div>

  <div class="wrap">
    <div class="card" id="card">
      <div id="questionBlock">
        <div class="question">
          <span class="romanticFont">Suhasini</span>
          WILL YOU BE MY VALENTINE?
        </div>

        <div class="btnRow">
          <button class="yes" id="yesBtn">YES ðŸ’˜</button>
        </div>
        <div class="sub">âœ¨ A special surprise awaits âœ¨</div>
      </div>

      <div class="success" id="successText">I KNEW YOU LOVE ME ðŸ’ž</div>
    </div>
  </div>

  <button class="no" id="noBtn">NO ðŸ˜ˆ</button>

  <script>
    /* =========================
       LYRICS CONFIGURATION
    ========================== */
    // I broke the lines slightly so they fit better on mobile screens
    const lyricsData = [
      "I take one look at you",
      "Taking me out of",
      "Of the ordinary",
      "I want you laying me down",
      "Til weâ€™re dead and buried",
      "On the edge of your knife",
      "Staying drunk on your vine",
      "The angels up in the clouds",
      "Are jealous knowing we found",
      "Something so out of the ordinary",
      "ðŸ’˜"
    ];

    // Inject Lyrics
    const lyricsContainer = document.getElementById("lyricsContent");
    lyricsContainer.innerHTML = lyricsData.map(line => `<p>${line}</p>`).join("");


    /* =========================
       AUDIO AUTOPLAY LOGIC
    ========================== */
    const audio = document.getElementById("music");
    audio.volume = 0.6; 

    window.addEventListener('load', () => {
      const playPromise = audio.play();
      if (playPromise !== undefined) {
        playPromise.catch(error => {
          console.log("Autoplay blocked. Waiting for interaction.");
        });
      }
    });

    document.body.addEventListener('click', () => {
      if(audio.paused) audio.play();
    }, { once: true });

    document.body.addEventListener('touchstart', () => {
      if(audio.paused) audio.play();
    }, { once: true });


    /* =========================
       EXISTING LOGIC
    ========================== */
    const hearts = ["ðŸ’–","ðŸ’—","ðŸ’˜","ðŸ’","ðŸ’•","ðŸ’“","â¤ï¸","ðŸ©·","âœ¨","ðŸ«¶"];
    const gifURLs = [
      "https://media.giphy.com/media/MDJ9IbxxvDUQM/giphy.gif",
      "https://media.giphy.com/media/l4pTdcifPZLpDjL1e/giphy.gif",
      "https://media.giphy.com/media/3o7abB06u9bNzA8lu8/giphy.gif",
      "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbnRyYTg3bDg3dDBmY3hjYjlhMjF2MWV3NjIwcXpqM2RlOHZ4OXAxaSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/ytu2GUYbvhz7zShGwS/giphy.gif",
      "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3cmZ5NG93ZDRsM3d0cWRmenA3eXhscThldGxrdm5zOGJyOWt2MTNmNiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/llJX1hxWL8IWDotJPd/giphy.gif"
    ];

    function rand(min,max){ return Math.random()*(max-min)+min; }
    function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

    function spawnElement(text, className, lifetime) {
      const el = document.createElement("div");
      el.className = className;
      el.textContent = text;
      document.body.appendChild(el);
      setTimeout(() => el.remove(), lifetime);
      return el;
    }

    setInterval(() => {
      const el = spawnElement(pick(hearts), "heart", 6000);
      const x = rand(0, 90);
      el.style.left = x + "vw";
      el.style.bottom = "-10vh";
      el.style.fontSize = rand(15, 30) + "px";
      const duration = rand(4, 7);
      el.animate([
        { transform: `translateY(0) rotate(0deg)`, opacity: 0 },
        { opacity: 1, offset: 0.2 },
        { transform: `translateY(-110vh) rotate(${rand(-360, 360)}deg)`, opacity: 0 }
      ], { duration: duration * 1000, easing: 'linear' });
    }, 400);

    /* NO Button Logic */
    const noBtn = document.getElementById("noBtn");
    
    function moveNo() {
      const padding = 20;
      const bW = noBtn.offsetWidth;
      const bH = noBtn.offsetHeight;
      const maxX = window.innerWidth - bW - padding;
      const maxY = window.innerHeight - bH - padding;
      
      const newX = rand(padding, maxX);
      const newY = rand(padding, maxY);
      
      noBtn.style.left = `${newX}px`;
      noBtn.style.top = `${newY}px`;
    }

    window.addEventListener('load', moveNo);
    noBtn.addEventListener("mouseenter", moveNo);
    noBtn.addEventListener("touchstart", (e) => {
      e.preventDefault();
      moveNo();
    });

    /* YES Button Logic */
    const yesBtn = document.getElementById("yesBtn");
    const questionBlock = document.getElementById("questionBlock");
    const successText = document.getElementById("successText");
    let fireworkMode = false;

    yesBtn.addEventListener("click", () => {
      questionBlock.classList.add("hidden");
      noBtn.classList.add("hidden");
      successText.style.display = "block";
      fireworkMode = true;
      triggerCelebration();
    });

    function triggerCelebration() {
      for(let i=0; i<30; i++) {
        setTimeout(() => {
          const c = spawnElement("", "confetti", 4000);
          c.style.left = rand(0, 100) + "vw";
          c.style.top = "-5vh";
          c.style.width = "10px";
          c.style.height = "10px";
          c.style.backgroundColor = `hsl(${rand(0, 360)}, 100%, 70%)`;
          c.animate([
            { transform: 'translateY(0) rotate(0)', opacity: 1 },
            { transform: `translate( ${rand(-20, 20)}vw, 105vh) rotate(${rand(0, 720)}deg)`, opacity: 0.5 }
          ], { duration: rand(2000, 4000), easing: 'cubic-bezier(0,0,0.2,1)' });
        }, i * 100);
      }
      for(let i=0; i<5; i++) {
        setTimeout(() => {
          const g = document.createElement("img");
          g.className = "gif";
          g.src = pick(gifURLs);
          g.style.left = rand(10, 60) + "vw";
          g.style.top = rand(10, 60) + "vh";
          document.body.appendChild(g);
          setTimeout(() => g.remove(), 2500);
        }, i * 600);
      }
    }

    /* Canvas Fireworks */
    const canvas = document.getElementById("fx");
    const ctx = canvas.getContext("2d");
    let particles = [];

    function resize() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resize);
    resize();

    class Particle {
      constructor(x, y, color) {
        this.x = x; this.y = y;
        this.color = color;
        this.vel = { x: rand(-3, 3), y: rand(-3, 3) };
        this.life = 1;
        this.decay = rand(0.01, 0.02);
      }
      draw() {
        ctx.globalAlpha = this.life;
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
        ctx.fill();
      }
      update() {
        this.x += this.vel.x;
        this.y += this.vel.y;
        this.vel.y += 0.05; 
        this.life -= this.decay;
      }
    }

    function createExplosion(x, y) {
      const color = `hsl(${rand(0, 360)}, 100%, 70%)`;
      for(let i=0; i<20; i++) particles.push(new Particle(x, y, color));
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      if(fireworkMode && Math.random() < 0.05) {
        createExplosion(rand(0, canvas.width), rand(0, canvas.height * 0.5));
      }
      particles = particles.filter(p => p.life > 0);
      particles.forEach(p => { p.update(); p.draw(); });
      requestAnimationFrame(animate);
    }
    animate();

    window.addEventListener("pointerdown", (e) => {
      createExplosion(e.clientX, e.clientY);
    });
  </script>
</body>
</html>
